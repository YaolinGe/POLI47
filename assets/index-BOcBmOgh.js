import*as t from"https://threejsfundamentals.org/threejs/resources/threejs/r127/build/three.module.js";import{OrbitControls as z}from"https://threejsfundamentals.org/threejs/resources/threejs/r127/examples/jsm/controls/OrbitControls.js";import{OBJLoader as M}from"https://threejsfundamentals.org/threejs/resources/threejs/r127/examples/jsm/loaders/OBJLoader.js";import{MTLLoader as F}from"https://threejsfundamentals.org/threejs/resources/threejs/r127/examples/jsm/loaders/MTLLoader.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))m(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&m(c)}).observe(document,{childList:!0,subtree:!0});function g(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function m(n){if(n.ep)return;n.ep=!0;const r=g(n);fetch(n.href,r)}})();function O(){const h=document.querySelector("#c"),l=new t.WebGLRenderer({canvas:h}),g=45,m=2,n=.1,r=100,c=new t.PerspectiveCamera(g,m,n,r);c.position.set(0,10,20);const f=new z(c,h);f.target.set(0,5,0),f.update();const d=new t.Scene;d.background=new t.Color("white");{const e=new t.TextureLoader().load("https://threejsfundamentals.org/threejs/resources/images/checker.png");e.wrapS=t.RepeatWrapping,e.wrapT=t.RepeatWrapping,e.magFilter=t.NearestFilter;const o=4e3/200;e.repeat.set(o,o);const a=new t.PlaneGeometry(4e3,4e3),p=new t.MeshPhongMaterial({map:e,side:t.DoubleSide}),u=new t.Mesh(a,p);u.rotation.x=Math.PI*-.5,d.add(u)}{const o=new t.HemisphereLight(11657727,12155424,1);d.add(o)}{const e=new t.DirectionalLight(15724014,1);e.position.set(5,10,2),d.add(e),d.add(e.target)}function y(i,s,e,o){const a=i*.5,p=t.MathUtils.degToRad(o.fov*.5),u=a/Math.tan(p),S=new t.Vector3().subVectors(o.position,e).multiply(new t.Vector3(1,0,1)).normalize();o.position.copy(S.multiplyScalar(u).add(e)),o.near=s/100,o.far=s*100,o.updateProjectionMatrix(),o.lookAt(e.x,e.y,e.z)}new F().load("assets/model/c14_4.mtl",s=>{s.preload();const e=new M;e.setMaterials(s),e.load("assets/model/chapel.obj",o=>{d.add(o);const a=new t.Box3().setFromObject(o),p=a.getSize(new t.Vector3).length(),u=a.getCenter(new t.Vector3);y(p*1.2,p,u,c),f.maxDistance=p*10,f.target.copy(u),f.update()})});function L(i){const s=i.domElement,e=s.clientWidth,o=s.clientHeight,a=s.width!==e||s.height!==o;return a&&i.setSize(e,o,!1),a}function w(){if(L(l)){const i=l.domElement;c.aspect=i.clientWidth/i.clientHeight,c.updateProjectionMatrix()}l.render(d,c),requestAnimationFrame(w)}requestAnimationFrame(w)}O();
